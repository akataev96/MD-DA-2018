---
title: "Lab1"
author: "Andrei Kataev"
date: '21 декабря 2018 г '
output: html_document
---

##Лабораторная работа 1
  Проверка следующих навыков: Манипулирование объектами данных; использование встроенных функций; построение простейших графиков; простейшие статистические концепции.

#Исходные данные
  Экспоненциальное распределение определяется следующей функцией распределения:

``F(x) = 1 - e^(-λ⋅x)``

  Функция ``rexp`` генерирует случайные переменные при помощи экспоненциального распределения ``rexp(n=42, rate=5)`` вернёт 42 экспоненциально-распределённых числа с параметром (λ) равным 5. Ели второй аргумент не указан, будет использовано значение 1 т.е. получим "стандартное экспоненциальное распределение".

#Задание 1
1.Сгенерируйте 200 случайных значений из стандартного экспоненциального распределения и сохраните в вектор exp.1. Найдите среднее и стандартное отклонение из данных этого вектора.
```{r}
exp.1<-rexp(200)
mean.exp.1<-mean(exp.1)
sd.exp.1<-sd(exp.1)
mean.exp.1
sd.exp.1
```

2.Повторите, использовав следующие значения параметра λ: 0.1, 0.5, 5, 10, и сохраните результаты в векторы: exp.0.1, exp.0.5, exp.5, exp.10.
```{r}
exp.0.1<-rexp(200, 0.1)
mean.exp.0.1<-mean(exp.0.1)
sd.exp.0.1<-sd(exp.0.1)
mean.exp.0.1
sd.exp.0.1

exp.0.5<-rexp(200, 0.5)
mean.exp.0.5<-mean(exp.0.5)
sd.exp.0.5<-sd(exp.0.5)
mean.exp.0.5
sd.exp.0.5

exp.5<-rexp(200, 5)
mean.exp.5<-mean(exp.5)
sd.exp.5<-sd(exp.5)
mean.exp.5
sd.exp.5

exp.10<-rexp(200, 10)
mean.exp.10<-mean(exp.10)
sd.exp.10<-sd(exp.10)
mean.exp.10
sd.exp.10
```

3.Функция ``plot()`` общая функция для визуализации данных. Функция ``hist()`` принимает данные и раскладывает их по корзинам. Чтобы использовать эти функции нужно для начала передать им данные, которые хотим визуализировать.

4.Используйте функцию ``hist()`` для построения гистограммы полученного ранее стандартного распределения.
```{r}
hist(exp.1, prob = TRUE, main = "Гистограмма стандартного экспоненциального распределения", ylab="Плотность распределения")
curve(dexp(x), from = 0, to = 8, add = TRUE)
```
  Вид полученной гистограммы соответствует виду стандартного экспоненциального распределения.

5.Используйте функцию ``plot()`` с тем же самым вектором для построения графика значений в порядке следования.
```{r}
plot(exp.1, xlab="Индекс значения", main="График значений exp.1 в порядке следования")
```
  По полученному графику значений ``exp.1`` видно, что у стандартного экспоненциального распределения, как и у любого друго неравномерного распределения, присутствует разброс знаяений, а относительно малые и большшие значения генерируются в случайном порядке.

6.Используйте функцию ``plot()`` с любыми двумя полученными ранее векторами, чтобы получить диаграмму рассеяния (scatterplot) этих векторов относительно друг друга.
```{r}
plot(exp.1, exp.10, main="Диаграмма рассеяния exp.1 и exp.10")
```
  Полученная диаграмма рассеяния ``exp.1`` и ``exp.10`` показывает, что между рассматриваемыми векторами нет выраженной связи.

7.Теперь сравним свойства всех наших векторов. Для начала создадим вектор, содержащий средние значения каждого из 5 полученных ранее распределений в порядке их создания. Полученный вектор сохраним в переменную ``exp.means``. 
```{r}
exp.means<-c(mean.exp.1, mean.exp.0.1, mean.exp.0.5, mean.exp.5, mean.exp.10)
exp.means
```

  Далее необходимо создать следующие диаграммы рассеяния:
8.Вектор с пятью средними относительно каждого из пяти векторов с различными значениями λ.
```{r}
pairs(~exp.means+exp.1[1:5]+exp.0.1[1:5]+exp.0.5[1:5]+exp.5[1:5]+exp.10[1:5], main="Матрица рассеяния exp.mean относительно исходных векторов", horInd=1)
```
  Полученные диаграммы рассеяния говорят о том, что между вектором средних и векторами распределений с различными значениями λ нет однозначной связи.
  
9.Вектор с пятью стандартными отклонениями относительно каждого из пяти векторов с различными значениями λ.
```{r}
exp.sd <- c(sd.exp.1, sd.exp.0.1, sd.exp.0.5, sd.exp.5, sd.exp.10)
exp.sd
```

```{r}
pairs(~exp.sd+exp.1[1:5]+exp.0.1[1:5]+exp.0.5[1:5]+exp.5[1:5]+exp.10[1:5], main="Матрица рассеяния exp.mean относительно исходных векторов", horInd=1)
```
  Полученные диаграммы рассеяния говорят о том, что между вектором стандартных отклонений и векторами распределений с различными значениями λ нет однозначной связи.
  Диаграммы рассеяния между вектором средних и векторами распределений и диааграммы рассеяния между вектором стандартных отклонений и векторами распределений имеют одинаковый вид, что указывает на однозначную связь между векторами средних и стандартных отклонений.

10.Вектор с пятью средними относительно вектора с пятью стандартными отклонениями.
Для каждого графика, поясните увиденное.
```{r}
plot(exp.means, exp.sd, main="Диаграмма рассеяния exp.means относительно exp.sd")
lines(exp.means, exp.sd)
```
  Полученная диаграмма рассеяния ``exp.means`` и ``exp.sd`` говорит о однозначной линейной зависимости между векторами со  средними и со стандартными отклонениями.


#Задание 2
  R достаточно производителен, чтобы вычислять относительно большие объёмы данных.

1.Для демонстрации сгенерируйте 1100000 (1 млн. 100 тысяч) чисел из стандартного экспоненциального распределения и сохраните их в вектор ``huge.exp.1``. Получите среднее и стандартное отклонение.
```{r}
huge.exp.1<-rexp(1100000)
mean.huge.exp.1 <- mean(huge.exp.1)
sd.huge.exp.1<-sd(huge.exp.1)
mean.huge.exp.1
sd.huge.exp.1
```

2.Получите гистограмму ``huge.exp.1``. Она соответствует функции ``1 - e:^(-x)``? Должна ли?
```{r}
hist(huge.exp.1, prob = TRUE, main = "Гистограмма стандартного экспоненциального распределения", ylab="Плотность распределения")
curve(dexp(x), from = 0, to = 8, add = TRUE)
```
  Гистограмма должна соответствовать и соответствует не функции распределения ``1 - e:^(-x)``, а функции плотности распределения ``x*e:^(-x)``.

3.Получите среднее всех чисел из ``huge.exp.1`` строго больших 1. Для проверки выборки может потребоваться новый вектор.
```{r}
huge.exp.1.greater.1<-huge.exp.1>1
mean.exp.1.greater.1<-mean(huge.exp.1.greater.1)
mean.exp.1.greater.1
```

4.Получите матрицу ``huge.exp.1.mat``, содержащую 1100 строк и 1000 колонок. Постройте гистограмму, использовав полученную матрицу. Что можно сказать о полученных данных?
```{r}
huge.exp.1.mat<-matrix(huge.exp.1, nrow=1100, ncol=1000)
hist(huge.exp.1.mat, prob = TRUE, main = "Гистограмма стандартного экспоненциального распределения", ylab="Плотность распределения")
curve(dexp(x), from = 0, to = 8, add = TRUE)
```
  Полученная гистограмма аналогична диаграмме, полученной в пункте 2, т.о. можно сделать вывод о том, что вид диаграммы не зависит от способа представления входных данных.

5.Рассчитайте среднее 137-й колонки из ``huge.exp.1.mat``.
```{r}
colMeans(huge.exp.1.mat)[137]
```

6.Найдите среднее всей 1000 колонок и сохраните их в вектор. Отобразите диаграмму средних зннчений колонок. Объясните почему форма диаграммы отличается от виденных ранее.
```{r}
colmeans.huge.exp.1<-colMeans(huge.exp.1.mat)
hist(colmeans.huge.exp.1, prob = TRUE, main = "Гистограмма средних значений колонок", ylab="Плотность распределения")
```
  Полученная диаграмма имеет такой вид, т.к. среднее значение экспоненциального распределения равно 1/λ. В данном случае λ равно 1, поэтому среднее значение каждой колонки стремится к 1.

7.Рассчитайте квадрат каждого значения из ``huge.exp.1`` и найдите среднее и стандартное отклонение полученного вектора квадратов. Объясните отличие от соответствующих показателей вектора ``huge.exp.1``. Вам может помочь формула, по которой R рассчитывает стандартное отклонение: ``sqrt(sum((x - mean(x))^2) / (n - 1))``.
```{r}
huge.exp.square.1<-huge.exp.1^2
mean.huge.exp.square.1<-mean(huge.exp.square.1)
sd.huge.exp.square.1<-sd(huge.exp.square.1)
mean.huge.exp.1
mean.huge.exp.square.1
sd.huge.exp.1
sd.huge.exp.square.1
```
  Среднее значение увеличивается при увеличении суммы всех элементов, что подтверждают полученные знаения ``mean.huge.exp.1`` и  ``mean.huge.exp.square.1``.
  Стандартное отклонение увеличивается при увеличении значения каждого из элементов, что подтверждают полученные знаения ``sd.huge.exp.1`` и  ``sd.huge.exp.square.1``.